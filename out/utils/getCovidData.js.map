{"version":3,"sources":["../../src/utils/getCovidData.ts"],"sourcesContent":["import { getBrowser } from \"../lib/BrowserEnv.js\";\r\n\r\nexport const getCovidData = async () => {\r\n  const browser = await getBrowser();\r\n  const page = await browser.newPage();\r\n  await page.goto(\"https://www.worldometers.info/coronavirus/\");\r\n  const data = await page.evaluate(() => {\r\n    const table = document.querySelector(\r\n      \"#main_table_countries_today > tbody:nth-child(2)\"\r\n    );\r\n\r\n    if (!table) return [];\r\n\r\n    const rows = Array.from(\r\n      table.querySelectorAll(\"tr[role=row]:not(.row_continent)\")\r\n    );\r\n    const list = rows.slice(0, 17).map((row) => {\r\n      return {\r\n        country: row.querySelector(\"td:nth-child(2)\")?.textContent || \"\",\r\n        totalCases: row.querySelector(\"td:nth-child(3)\")?.textContent || \"\",\r\n        newCases: row.querySelector(\"td:nth-child(4)\")?.textContent || \"\",\r\n        totalDeaths:\r\n          row.querySelector(\"td:nth-child(5)\")?.textContent?.trimEnd() || \"\",\r\n        newDeaths: row.querySelector(\"td:nth-child(6)\")?.textContent || \"\",\r\n        totalRecovered: row.querySelector(\"td:nth-child(7)\")?.textContent || \"\",\r\n        newRecovered: row.querySelector(\"td:nth-child(8)\")?.textContent || \"\",\r\n        activeCases: row.querySelector(\"td:nth-child(9)\")?.textContent || \"\",\r\n\r\n        validTill: new Date().getTime() + 1000 * 60 * 60 * 6,\r\n      };\r\n    });\r\n    return list;\r\n  });\r\n  setTimeout(async () => {\r\n    await page.close();\r\n    await browser.close();\r\n  }, 0);\r\n  return data;\r\n};\r\n"],"names":["getBrowser","getCovidData","browser","page","data","newPage","goto","evaluate","table","document","querySelector","rows","Array","from","querySelectorAll","list","slice","map","row","country","textContent","totalCases","newCases","totalDeaths","trimEnd","newDeaths","totalRecovered","newRecovered","activeCases","validTill","Date","getTime","setTimeout","close"],"mappings":"osDAAA,OAASA,UAAU,KAAQ,sBAAuB,AAElD,QAAO,IAAMC,iCAAe,oBAAA,UAAY,KAChCC,QACAC,KAEAC,4EAHU,SAAMJ,qBAAhBE,QAAU,cACH,SAAMA,QAAQG,OAAO,WAA5BF,KAAO,cACb,SAAMA,KAAKG,IAAI,CAAC,sDAAhB,cACa,SAAMH,KAAKI,QAAQ,CAAC,UAAM,CACrC,IAAMC,MAAQC,SAASC,aAAa,CAClC,oDAGF,GAAI,CAACF,MAAO,MAAO,EAAE,AAAC,CAEtB,IAAMG,KAAOC,MAAMC,IAAI,CACrBL,MAAMM,gBAAgB,CAAC,qCAEzB,IAAMC,KAAOJ,KAAKK,KAAK,CAAC,EAAG,IAAIC,GAAG,CAAC,SAACC,IAAQ,KAE/BA,mBACGA,oBACFA,oBAERA,mDACSA,oBACKA,oBACFA,oBACDA,oBATf,MAAO,CACLC,QAASD,CAAAA,CAAAA,mBAAAA,IAAIR,aAAa,CAAC,4BAAlBQ,4BAAAA,KAAAA,EAAAA,mBAAsCE,WAAW,AAAD,GAAK,GAC9DC,WAAYH,CAAAA,CAAAA,oBAAAA,IAAIR,aAAa,CAAC,4BAAlBQ,6BAAAA,KAAAA,EAAAA,oBAAsCE,WAAW,AAAD,GAAK,GACjEE,SAAUJ,CAAAA,CAAAA,oBAAAA,IAAIR,aAAa,CAAC,4BAAlBQ,6BAAAA,KAAAA,EAAAA,oBAAsCE,WAAW,AAAD,GAAK,GAC/DG,YACEL,CAAAA,CAAAA,oBAAAA,IAAIR,aAAa,CAAC,4BAAlBQ,6BAAAA,KAAAA,EAAAA,gCAAAA,oBAAsCE,6DAAtCF,KAAAA,EAAAA,+BAAmDM,YAAa,GAClEC,UAAWP,CAAAA,CAAAA,oBAAAA,IAAIR,aAAa,CAAC,4BAAlBQ,6BAAAA,KAAAA,EAAAA,oBAAsCE,WAAW,AAAD,GAAK,GAChEM,eAAgBR,CAAAA,CAAAA,oBAAAA,IAAIR,aAAa,CAAC,4BAAlBQ,6BAAAA,KAAAA,EAAAA,oBAAsCE,WAAW,AAAD,GAAK,GACrEO,aAAcT,CAAAA,CAAAA,oBAAAA,IAAIR,aAAa,CAAC,4BAAlBQ,6BAAAA,KAAAA,EAAAA,oBAAsCE,WAAW,AAAD,GAAK,GACnEQ,YAAaV,CAAAA,CAAAA,oBAAAA,IAAIR,aAAa,CAAC,4BAAlBQ,6BAAAA,KAAAA,EAAAA,oBAAsCE,WAAW,AAAD,GAAK,GAElES,UAAW,IAAIC,OAAOC,OAAO,GAAK,IAAO,GAAK,GAAK,CACrD,CACF,GACA,OAAOhB,IACT,WA1BMX,KAAO,cA2Bb4B,WAAW,oBAAA,UAAY,wEACrB,SAAM7B,KAAK8B,KAAK,WAAhB,cACA,SAAM/B,QAAQ+B,KAAK,WAAnB,0BACF,GAAG,GACH,SAAO7B,QACT,mBApCaH,oDAoCX"}